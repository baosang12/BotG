# Run in Git Bash at repository root:
ts=20250827_143911
branch="fix/postrun-${ts}-finalize"
git checkout -b "$branch"

# Stage PR body + checklist
git add path_issues/postrun_pr_body.md path_issues/postrun_checklist.md

# Stage artifacts if present (safe to run even if some globs don't match)
git add path_issues/closed_trades_fifo_reconstructed.csv \
        path_issues/reconstruct_report.json \
        path_issues/slip_latency_percentiles.json \
        path_issues/slippage_hist.png \
        path_issues/latency_percentiles.png \
        path_issues/fillrate_hourly.csv \
        path_issues/top_slippage.csv \
        path_issues/postrun_summary.txt \
        path_issues/postrun_artifacts_*.zip

# Commit & push
git commit -m "chore(postrun): add PR body + checklist and packaged artifacts for review"
git push -u origin HEAD

# Save branch name for operator reference
echo "$branch" > path_issues/last_branch_pushed.txt

# Then create PR in GitHub UI and paste path_issues/postrun_pr_body.md into description; attach ZIP from path_issues.
# Run these in Git Bash from the repo root
ts=$(date +%Y%m%d_%H%M%S)
branch="fix/postrun-${ts}-finalize"
git checkout -b "$branch"

# stage the new PR files and checklist
git add path_issues/postrun_pr_body.md path_issues/postrun_checklist.md

# optionally add artifacts for reviewer (only if they exist)
git add path_issues/closed_trades_fifo_reconstructed.csv path_issues/reconstruct_report.json \
        path_issues/slip_latency_percentiles.json path_issues/slippage_hist.png path_issues/latency_percentiles.png \
        path_issues/fillrate_hourly.csv path_issues/top_slippage.csv path_issues/postrun_artifacts_*.zip path_issues/postrun_summary.txt

git commit -m "chore(postrun): add PR body + checklist and packaged artifacts for review"
git push -u origin HEAD
echo "BRANCH_PUSHED:$branch"
